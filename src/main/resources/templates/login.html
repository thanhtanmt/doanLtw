<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/main}">

<head>
<title>Đăng nhập</title>

<style>
.login-wrapper-container {
	display: flex;
	align-items: center;
	justify-content: center;
	min-height: calc(100vh - 200px);
	padding: 40px 20px;
	background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.login-page-container {
	width: 100%;
	max-width: 1000px;
	min-height: 650px;
	display: flex;
	background: white;
	border-radius: 15px;
	box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
	overflow: hidden;
}

/* ----- Cột thông tin (Bên trái) ----- */
.info-panel {
	flex: 1;
	padding: 50px;
	color: white;
	display: flex;
	flex-direction: column;
	justify-content: center;
	position: relative;
	background-size: cover;
	background-position: center center;
	background-image: linear-gradient(135deg, rgba(102, 126, 234, 0.9) 0%,
		rgba(118, 75, 162, 0.9) 100%),
		url('https://images.unsplash.com/photo-1551488831-00ddcb6c6bd3?w=1000');
}

.info-panel h1 {
	font-size: 32px;
	font-weight: 700;
	margin-bottom: 20px;
}

.info-panel p {
	font-size: 16px;
	line-height: 1.7;
	margin-bottom: 30px;
	opacity: 0.9;
}

.info-features {
	list-style: none;
	padding-left: 0;
}

.info-features li {
	font-size: 15px;
	margin-bottom: 15px;
	display: flex;
	align-items: center;
	gap: 10px;
}

.info-features i {
	font-size: 18px;
	width: 20px;
	text-align: center;
}

/* ----- Cột Form (Bên phải) ----- */
.form-panel {
	flex: 1.1;
	display: flex;
	flex-direction: column;
	justify-content: center;
	padding: 40px;
}

.form-title {
	padding-bottom: 20px;
	text-align: center;
	font-size: 24px;
	font-weight: 700;
	color: #333;
}

/* Form */
.form-content {
	padding: 30px 0 0 0;
}

.form-label {
	display: block;
	font-weight: 600;
	font-size: 14px;
	margin-bottom: 8px;
	color: #333;
}

.form-label i {
	margin-right: 5px;
	color: #667eea;
}

.form-group {
	margin-bottom: 20px;
	position: relative;
}

.form-group i {
	position: absolute;
	left: 18px;
	top: 50%;
	transform: translateY(-50%);
	color: #bdc3c7;
}

.form-group input {
	width: 100%;
	padding: 15px 15px 15px 50px;
	border: 1px solid #e0e0e0;
	border-radius: 8px;
	font-size: 15px;
}

.form-group input:focus {
	outline: none;
	border-color: #667eea;
	box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
}

.form-options {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: 25px;
	font-size: 14px;
}

.remember-me {
	display: flex;
	align-items: center;
	gap: 8px;
	color: #333;
}

.remember-me input[type="checkbox"] {
	width: 16px;
	height: 16px;
	cursor: pointer;
}

.forgot-password-link {
	color: #667eea;
	text-decoration: none;
	font-weight: 500;
}

.login-btn {
	width: 60%;
	margin: 0 auto;
	display: block;
	padding: 15px;
	border: none;
	border-radius: 8px;
	background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
	color: white;
	font-size: 16px;
	font-weight: 600;
	cursor: pointer;
	transition: all 0.3s;
}

.login-btn:hover {
	transform: translateY(-2px);
	box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
}

/* Khách hàng */
.divider {
	text-align: center;
	color: #bdc3c7;
	margin: 25px 0;
	position: relative;
}

.divider::before, .divider::after {
	content: '';
	position: absolute;
	top: 50%;
	width: 40%;
	height: 1px;
	background: #e0e0e0;
}

.divider::before {
	left: 0;
}

.divider::after {
	right: 0;
}

.social-login {
	display: flex;
	justify-content: center;
}

.social-btn {
	width: 60%;
	padding: 12px;
	border-radius: 8px;
	text-decoration: none;
	font-weight: 500;
	display: flex;
	align-items: center;
	justify-content: center;
	gap: 10px;
	transition: transform 0.2s;
}

.social-btn:hover {
	transform: translateY(-2px);
}

.social-btn.google {
	background: #f8f9fa;
	border: 1px solid #e0e0e0;
	color: #333;
}

.create-account {
	text-align: center;
	margin-top: 25px;
	color: #333;
}

.create-account a {
	color: #667eea;
	font-weight: 600;
	text-decoration: none;
}

@media ( max-width : 992px) {
	.login-page-container {
		flex-direction: column;
		min-height: auto;
		max-width: 500px;
	}
	.info-panel {
		display: none;
	}
	.form-panel {
		padding: 30px;
	}
	.login-wrapper-container {
		padding: 30px 20px;
	}
}
</style>
</head>

<body>

	<main layout:fragment="content">

		<div class="login-wrapper-container">
			<div class="login-page-container">

				<div class="info-panel">
					<h1>Chào mừng trở lại!</h1>
					<p>Đăng nhập để khám phá những bộ sưu tập thời trang mới nhất
						và nhận được các ưu đãi đặc biệt dành riêng cho bạn.</p>
					<ul class="info-features">
						<li><i class="fas fa-check-circle"></i> <span>Mua sắm
								dễ dàng, nhanh chóng</span></li>
						<li><i class="fas fa-star"></i> <span>Ưu đãi độc quyền
								cho thành viên</span></li>
						<li><i class="fas fa-truck"></i> <span>Theo dõi đơn
								hàng mọi lúc</span></li>
					</ul>
				</div>

				<div class="form-panel">
					<div class="form-title">Đăng nhập tài khoản</div>

					<div class="form-content">

						<form id="login-form" th:action="@{/login}" method="post">
							<!-- CSRF token - Spring Security tự động thêm qua Thymeleaf -->
							
							<label for="username" class="form-label"> <i
								class="fas fa-user"></i> Tên đăng nhập hoặc Email
							</label>
							<div class="form-group">
								<i class="fas fa-envelope"></i> 
								<input type="text" 
									id="username"
									name="username" 
									placeholder="Nhập tên đăng nhập hoặc email"
									autocomplete="username"
									required>
							</div>

							<label for="password" class="form-label"> <i
								class="fas fa-lock"></i> Mật khẩu
							</label>
							<div class="form-group">
								<i class="fas fa-key"></i> 
								<input type="password" 
									id="password"
									name="password" 
									placeholder="Nhập mật khẩu"
									autocomplete="current-password"
									required>
							</div>

							<div th:if="${param.error}"
								style="color: red; font-size: 13px; text-align: center; margin-bottom: 15px;">
								❌ Sai tên đăng nhập hoặc mật khẩu.</div>
							
							<div th:if="${param.logout}"
								style="color: green; font-size: 13px; text-align: center; margin-bottom: 15px;">
								✅ Đăng xuất thành công.</div>
							
							<div th:if="${param.reset}"
								style="color: green; font-size: 13px; text-align: center; margin-bottom: 15px;">
								✅ Đặt lại mật khẩu thành công. Vui lòng đăng nhập.</div>

							<div class="form-options">
								<div class="remember-me">
									<input type="checkbox" id="remember-me" name="remember-me">
									<label for="remember-me">Ghi nhớ đăng nhập</label>
								</div>
								<a th:href="@{/forgot-password}" class="forgot-password-link">Quên mật khẩu?</a>
							</div>

							<button type="submit" class="login-btn">ĐĂNG NHẬP</button>

							<div class="divider">HOẶC</div>
							<div class="social-login">
								<a href="#" class="social-btn google"> 
									<i class="fab fa-google"></i> Đăng nhập bằng Google
								</a>
							</div>
						</form>

						<div class="create-account">
							Chưa có tài khoản? <a th:href="@{/register}">Tạo tài khoản ngay</a>
						</div>


					</div>
				</div>
			</div>
		</div>

		<!-- Không cần JavaScript cho tab switching nữa -->

	</main>
</body>
</html>