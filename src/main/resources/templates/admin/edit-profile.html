<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/admin}">

<head>
    <title>Chỉnh sửa hồ sơ</title>
</head>

<body>
    <div layout:fragment="content">
        
        <!-- Alert Messages -->
        <div th:if="${success}" class="alert alert-success" style="margin-bottom: 1rem;">
            <i class="fas fa-check-circle"></i>
            <span th:text="${success}"></span>
        </div>
        <div th:if="${error}" class="alert alert-danger" style="margin-bottom: 1rem;">
            <i class="fas fa-exclamation-circle"></i>
            <span th:text="${error}"></span>
        </div>
        
        <div class="content-box fade-in" style="max-width: 800px; margin: 0 auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                <h2 style="margin: 0;">
                    <i class="fas fa-user-edit"></i>
                    Chỉnh sửa thông tin cá nhân
                </h2>
                <a th:href="@{/admin/profile}" class="btn btn-outline btn-sm">
                    <i class="fas fa-arrow-left"></i> Quay lại
                </a>
            </div>
            
            <form th:action="@{/admin/profile}" method="post">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-user"></i> Họ <span style="color: var(--danger-color);">*</span>
                    </label>
                    <input type="text" name="firstName" class="form-control" 
                           th:value="${currentUser?.firstName}" 
                           required 
                           placeholder="Nhập họ của bạn">
                </div>
                
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-user"></i> Tên <span style="color: var(--danger-color);">*</span>
                    </label>
                    <input type="text" name="lastName" class="form-control" 
                           th:value="${currentUser?.lastName}" 
                           required 
                           placeholder="Nhập tên của bạn">
                </div>
                
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-phone"></i> Số điện thoại
                    </label>
                    <input type="tel" name="phone" class="form-control" 
                           th:value="${currentUser?.phone}" 
                           pattern="[0-9]{10}" 
                           placeholder="Ví dụ: 0123456789">
                    <small style="color: var(--text-secondary);">Nhập 10 chữ số</small>
                </div>
                
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-envelope"></i> Email
                    </label>
                    <input type="email" class="form-control" 
                           th:value="${currentUser?.email}" 
                           disabled>
                    <small style="color: var(--text-secondary);">Email không thể thay đổi</small>
                </div>
                
                <div style="display: flex; gap: 1rem; justify-content: flex-end; margin-top: 2rem;">
                    <a th:href="@{/admin/profile}" class="btn btn-outline">
                        <i class="fas fa-times"></i> Hủy bỏ
                    </a>
                    <button type="submit" class="btn btn-success">
                        <i class="fas fa-save"></i> Lưu thay đổi
                    </button>
                </div>
            </form>
        </div>
        
    </div>
</body>
</html>
